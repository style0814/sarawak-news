export type Language = 'en' | 'zh' | 'ms';

export const translations = {
  en: {
    title: 'Sarawak News',
    subtitle: 'Voice of the Land of Hornbills',
    refresh: 'Refresh',
    refreshing: 'Refreshing...',
    points: 'views',
    point: 'view',
    noNews: 'No news yet. Click Refresh to fetch the latest news from Sarawak.',
    hoursAgo: 'hours ago',
    minutesAgo: 'minutes ago',
    justNow: 'just now',
    daysAgo: 'days ago',
    from: 'from',
    added: 'added',
    articles: 'articles',
    loading: 'Loading...',
    comments: 'comments',
    comment: 'comment',
    addComment: 'Add Comment',
    reply: 'Reply',
    like: 'Like',
    liked: 'Liked',
    writeComment: 'Write your comment...',
    submit: 'Submit',
    cancel: 'Cancel',
    discuss: 'Discuss',
    backToNews: 'Back to News',
    autoRefresh: 'Auto-refresh',
    lastUpdated: 'Last updated',
    readMore: 'Read Full Article',
    trending: 'Trending',
    latest: 'Latest',
    mostDiscussed: 'Most Discussed',
    // Auth
    login: 'Login',
    logout: 'Logout',
    register: 'Register',
    username: 'Username',
    email: 'Email',
    password: 'Password',
    displayName: 'Display Name',
    loginToComment: 'Login to comment',
    loginToLike: 'Login to like',
    noAccount: "Don't have an account?",
    hasAccount: 'Already have an account?',
    registerSuccess: 'Registration successful! Please login.',
    loginError: 'Invalid username or password',
    registerError: 'Registration failed',
    welcome: 'Welcome',
    // Pagination
    previous: 'Previous',
    next: 'Next',
    page: 'Page',
    of: 'of',
    showingNews: 'Showing news',
    // Search
    search: 'Search',
    searchPlaceholder: 'Search news...',
    searchResults: 'Search results for',
    noResults: 'No results found',
    advancedSearch: 'Advanced Search',
    sortBy: 'Sort by',
    relevance: 'Relevance',
    dateNewest: 'Date (Newest)',
    mostPopular: 'Most Popular',
    dateRange: 'Date Range',
    fromDate: 'From',
    toDate: 'To',
    clearFilters: 'Clear Filters',
    resultsFound: 'results found',
    // Bookmarks
    bookmark: 'Bookmark',
    bookmarked: 'Bookmarked',
    myBookmarks: 'My Bookmarks',
    noBookmarks: 'No bookmarks yet',
    // Share
    share: 'Share',
    // Admin
    admin: 'Admin',
    dashboard: 'Dashboard',
    totalNews: 'Total News',
    totalUsers: 'Total Users',
    totalComments: 'Total Comments',
    manageNews: 'Manage News',
    manageUsers: 'Manage Users',
    manageComments: 'Manage Comments',
    delete: 'Delete',
    confirmDelete: 'Are you sure you want to delete this?',
    analytics: 'Analytics',
    users: 'Users',
    news: 'News',
    makeAdmin: 'Make Admin',
    removeAdmin: 'Remove Admin',
    deleteUser: 'Delete User',
    source: 'Source',
    category: 'Category',
    clicks: 'Clicks',
    actions: 'Actions',
    bulkDelete: 'Bulk Delete',
    deleteOlderThan: 'Delete news older than',
    days: 'days',
    deleted: 'deleted',
    noData: 'No data available',
    dailyStats: 'Daily Statistics',
    dailyActivity: 'Daily Activity',
    clickTrend: 'Click Trend',
    sourceDistribution: 'News by Source',
    categoryDistribution: 'News by Category',
    engagementMetrics: 'Engagement Metrics',
    topNews: 'Top News',
    topSources: 'Top Sources',
    articlesCount: 'articles',
    filterBySource: 'Filter by source',
    filterByCategory: 'Filter by category',
    all: 'All',
    author: 'Author',
    content: 'Content',
    date: 'Date',
    // Errors
    errors: 'Errors',
    totalErrors: 'Total Errors',
    unresolvedErrors: 'Unresolved',
    todayErrors: 'Today',
    errorLevel: 'Level',
    errorType: 'Type',
    errorMessage: 'Message',
    errorEndpoint: 'Endpoint',
    errorTime: 'Time',
    resolve: 'Resolve',
    unresolve: 'Unresolve',
    clearResolved: 'Clear Resolved',
    deleteOld: 'Delete Old',
    enableNotifications: 'Enable Notifications',
    noErrors: 'No errors found',
    // RSS Refresh
    refreshRssFeeds: 'Refresh RSS Feeds',
    refreshRssDescription: 'Manually fetch new articles from all RSS sources',
    refreshNow: 'Refresh Now',
    addedArticles: 'Added',
    newArticles: 'new articles',
    noNewArticles: 'No new articles found',
    totalProcessed: 'Total processed',
    feedErrors: 'Feed errors',
    // Translation
    retryTranslation: 'Retry Translation',
    retryTranslationDescription: 'Translate untranslated article titles to Chinese and Malay',
    translateNow: 'Translate Now',
    translating: 'Translating...',
    translated: 'Translated',
    articlesTranslated: 'articles',
    noArticlesToTranslate: 'No articles to translate',
    pending: 'pending',
    // Comment History
    myComments: 'My Comments',
    totalCommentsMade: 'comments made',
    noCommentsYet: "You haven't made any comments yet",
    viewDiscussion: 'View discussion',
    likes: 'likes',
    // Comment Moderation
    flagged: 'Flagged',
    hidden: 'Hidden',
    visible: 'Visible',
    flag: 'Flag',
    unflag: 'Unflag',
    hide: 'Hide',
    show: 'Show',
    reason: 'Reason',
    filterByStatus: 'Filter by status',
    // Profile
    profile: 'Profile',
    editProfile: 'Edit Profile',
    memberSince: 'Member Since',
    changePassword: 'Change Password',
    currentPassword: 'Current Password',
    newPassword: 'New Password',
    confirmPassword: 'Confirm Password',
    leaveBlankPassword: 'Leave blank to keep current password',
    passwordMismatch: 'Passwords do not match',
    currentPasswordRequired: 'Current password is required',
    profileUpdated: 'Profile updated successfully',
    updateFailed: 'Failed to update profile',
    save: 'Save',
    // RSS Feed Management
    rssFeeds: 'RSS Feeds',
    manageFeeds: 'Manage RSS Feeds',
    addFeed: 'Add Feed',
    addNewFeed: 'Add New Feed',
    feedName: 'Feed Name',
    feedUrl: 'Feed URL',
    sarawakSource: 'Sarawak-dedicated source (all articles accepted)',
    sarawak: 'Sarawak',
    filtered: 'Filtered',
    lastFetched: 'Last Fetched',
    never: 'Never',
    active: 'Active',
    inactive: 'Inactive',
    warning: 'Warning',
    enable: 'Enable',
    disable: 'Disable',
    noFeeds: 'No feeds configured',
    recentErrors: 'Recent Errors',
    status: 'Status',
    type: 'Type'
  },
  zh: {
    title: '砂拉越新闻',
    subtitle: '犀鸟之乡的声音',
    refresh: '刷新',
    refreshing: '刷新中...',
    points: '浏览',
    point: '浏览',
    noNews: '暂无新闻。点击刷新获取砂拉越最新新闻。',
    hoursAgo: '小时前',
    minutesAgo: '分钟前',
    justNow: '刚刚',
    daysAgo: '天前',
    from: '来自',
    added: '已添加',
    articles: '篇文章',
    loading: '加载中...',
    comments: '条评论',
    comment: '条评论',
    addComment: '添加评论',
    reply: '回复',
    like: '点赞',
    liked: '已赞',
    writeComment: '写下您的评论...',
    submit: '提交',
    cancel: '取消',
    discuss: '讨论',
    backToNews: '返回新闻',
    autoRefresh: '自动刷新',
    lastUpdated: '最后更新',
    readMore: '阅读全文',
    trending: '热门',
    latest: '最新',
    mostDiscussed: '热议',
    // Auth
    login: '登录',
    logout: '退出',
    register: '注册',
    username: '用户名',
    email: '邮箱',
    password: '密码',
    displayName: '显示名称',
    loginToComment: '登录后评论',
    loginToLike: '登录后点赞',
    noAccount: '没有账号？',
    hasAccount: '已有账号？',
    registerSuccess: '注册成功！请登录。',
    loginError: '用户名或密码错误',
    registerError: '注册失败',
    welcome: '欢迎',
    // Pagination
    previous: '上一页',
    next: '下一页',
    page: '第',
    of: '共',
    showingNews: '显示新闻',
    // Search
    search: '搜索',
    searchPlaceholder: '搜索新闻...',
    searchResults: '搜索结果',
    noResults: '未找到结果',
    advancedSearch: '高级搜索',
    sortBy: '排序',
    relevance: '相关性',
    dateNewest: '日期（最新）',
    mostPopular: '最热门',
    dateRange: '日期范围',
    fromDate: '从',
    toDate: '至',
    clearFilters: '清除筛选',
    resultsFound: '条结果',
    // Bookmarks
    bookmark: '收藏',
    bookmarked: '已收藏',
    myBookmarks: '我的收藏',
    noBookmarks: '暂无收藏',
    // Share
    share: '分享',
    // Admin
    admin: '管理',
    dashboard: '仪表板',
    totalNews: '新闻总数',
    totalUsers: '用户总数',
    totalComments: '评论总数',
    manageNews: '管理新闻',
    manageUsers: '管理用户',
    manageComments: '管理评论',
    delete: '删除',
    confirmDelete: '确定要删除吗？',
    analytics: '数据分析',
    users: '用户',
    news: '新闻',
    makeAdmin: '设为管理员',
    removeAdmin: '移除管理员',
    deleteUser: '删除用户',
    source: '来源',
    category: '分类',
    clicks: '点击',
    actions: '操作',
    bulkDelete: '批量删除',
    deleteOlderThan: '删除早于',
    days: '天的新闻',
    deleted: '已删除',
    noData: '暂无数据',
    dailyStats: '每日统计',
    dailyActivity: '每日活动',
    clickTrend: '点击趋势',
    sourceDistribution: '来源分布',
    categoryDistribution: '分类分布',
    engagementMetrics: '互动指标',
    topNews: '热门新闻',
    topSources: '热门来源',
    articlesCount: '篇文章',
    filterBySource: '按来源筛选',
    filterByCategory: '按分类筛选',
    all: '全部',
    author: '作者',
    content: '内容',
    date: '日期',
    // Errors
    errors: '错误',
    totalErrors: '错误总数',
    unresolvedErrors: '未解决',
    todayErrors: '今日',
    errorLevel: '级别',
    errorType: '类型',
    errorMessage: '消息',
    errorEndpoint: '端点',
    errorTime: '时间',
    resolve: '解决',
    unresolve: '撤销解决',
    clearResolved: '清除已解决',
    deleteOld: '删除旧记录',
    enableNotifications: '启用通知',
    noErrors: '未发现错误',
    // RSS Refresh
    refreshRssFeeds: '刷新RSS订阅',
    refreshRssDescription: '手动从所有RSS来源获取新文章',
    refreshNow: '立即刷新',
    addedArticles: '已添加',
    newArticles: '篇新文章',
    noNewArticles: '未发现新文章',
    totalProcessed: '处理总数',
    feedErrors: '订阅错误',
    // Translation
    retryTranslation: '重试翻译',
    retryTranslationDescription: '将未翻译的文章标题翻译成中文和马来文',
    translateNow: '立即翻译',
    translating: '翻译中...',
    translated: '已翻译',
    articlesTranslated: '篇文章',
    noArticlesToTranslate: '没有需要翻译的文章',
    pending: '待处理',
    // Comment History
    myComments: '我的评论',
    totalCommentsMade: '条评论',
    noCommentsYet: '您还没有发表过评论',
    viewDiscussion: '查看讨论',
    likes: '个赞',
    // Comment Moderation
    flagged: '已标记',
    hidden: '已隐藏',
    visible: '可见',
    flag: '标记',
    unflag: '取消标记',
    hide: '隐藏',
    show: '显示',
    reason: '原因',
    filterByStatus: '按状态筛选',
    // Profile
    profile: '个人资料',
    editProfile: '编辑资料',
    memberSince: '加入时间',
    changePassword: '修改密码',
    currentPassword: '当前密码',
    newPassword: '新密码',
    confirmPassword: '确认密码',
    leaveBlankPassword: '留空则保持当前密码',
    passwordMismatch: '密码不匹配',
    currentPasswordRequired: '需要当前密码',
    profileUpdated: '资料更新成功',
    updateFailed: '更新失败',
    save: '保存',
    // RSS Feed Management
    rssFeeds: 'RSS订阅',
    manageFeeds: '管理RSS订阅',
    addFeed: '添加订阅',
    addNewFeed: '添加新订阅',
    feedName: '订阅名称',
    feedUrl: '订阅链接',
    sarawakSource: '砂拉越专属来源（接受所有文章）',
    sarawak: '砂拉越',
    filtered: '已筛选',
    lastFetched: '最后获取',
    never: '从未',
    active: '启用',
    inactive: '禁用',
    warning: '警告',
    enable: '启用',
    disable: '禁用',
    noFeeds: '未配置订阅',
    recentErrors: '最近错误',
    status: '状态',
    type: '类型'
  },
  ms: {
    title: 'Berita Sarawak',
    subtitle: 'Suara Bumi Kenyalang',
    refresh: 'Muat Semula',
    refreshing: 'Memuat semula...',
    points: 'tontonan',
    point: 'tontonan',
    noNews: 'Tiada berita lagi. Klik Muat Semula untuk mendapatkan berita terkini dari Sarawak.',
    hoursAgo: 'jam lepas',
    minutesAgo: 'minit lepas',
    justNow: 'baru sahaja',
    daysAgo: 'hari lepas',
    from: 'dari',
    added: 'ditambah',
    articles: 'artikel',
    loading: 'Memuatkan...',
    comments: 'komen',
    comment: 'komen',
    addComment: 'Tambah Komen',
    reply: 'Balas',
    like: 'Suka',
    liked: 'Disukai',
    writeComment: 'Tulis komen anda...',
    submit: 'Hantar',
    cancel: 'Batal',
    discuss: 'Bincang',
    backToNews: 'Kembali ke Berita',
    autoRefresh: 'Muat semula automatik',
    lastUpdated: 'Kemas kini terakhir',
    readMore: 'Baca Artikel Penuh',
    trending: 'Trending',
    latest: 'Terkini',
    mostDiscussed: 'Paling Dibincang',
    // Auth
    login: 'Log Masuk',
    logout: 'Log Keluar',
    register: 'Daftar',
    username: 'Nama Pengguna',
    email: 'Emel',
    password: 'Kata Laluan',
    displayName: 'Nama Paparan',
    loginToComment: 'Log masuk untuk komen',
    loginToLike: 'Log masuk untuk suka',
    noAccount: 'Tiada akaun?',
    hasAccount: 'Sudah ada akaun?',
    registerSuccess: 'Pendaftaran berjaya! Sila log masuk.',
    loginError: 'Nama pengguna atau kata laluan salah',
    registerError: 'Pendaftaran gagal',
    welcome: 'Selamat datang',
    // Pagination
    previous: 'Sebelum',
    next: 'Seterusnya',
    page: 'Halaman',
    of: 'daripada',
    showingNews: 'Menunjukkan berita',
    // Search
    search: 'Cari',
    searchPlaceholder: 'Cari berita...',
    searchResults: 'Hasil carian untuk',
    noResults: 'Tiada hasil dijumpai',
    advancedSearch: 'Carian Lanjutan',
    sortBy: 'Susun mengikut',
    relevance: 'Relevan',
    dateNewest: 'Tarikh (Terbaru)',
    mostPopular: 'Paling Popular',
    dateRange: 'Julat Tarikh',
    fromDate: 'Dari',
    toDate: 'Hingga',
    clearFilters: 'Kosongkan Penapis',
    resultsFound: 'hasil dijumpai',
    // Bookmarks
    bookmark: 'Penanda',
    bookmarked: 'Ditanda',
    myBookmarks: 'Penanda Saya',
    noBookmarks: 'Tiada penanda lagi',
    // Share
    share: 'Kongsi',
    // Admin
    admin: 'Admin',
    dashboard: 'Papan Pemuka',
    totalNews: 'Jumlah Berita',
    totalUsers: 'Jumlah Pengguna',
    totalComments: 'Jumlah Komen',
    manageNews: 'Urus Berita',
    manageUsers: 'Urus Pengguna',
    manageComments: 'Urus Komen',
    delete: 'Padam',
    confirmDelete: 'Adakah anda pasti mahu memadam ini?',
    analytics: 'Analitik',
    users: 'Pengguna',
    news: 'Berita',
    makeAdmin: 'Jadikan Admin',
    removeAdmin: 'Alih Keluar Admin',
    deleteUser: 'Padam Pengguna',
    source: 'Sumber',
    category: 'Kategori',
    clicks: 'Klik',
    actions: 'Tindakan',
    bulkDelete: 'Padam Pukal',
    deleteOlderThan: 'Padam berita lebih lama dari',
    days: 'hari',
    deleted: 'dipadam',
    noData: 'Tiada data',
    dailyStats: 'Statistik Harian',
    dailyActivity: 'Aktiviti Harian',
    clickTrend: 'Trend Klik',
    sourceDistribution: 'Berita mengikut Sumber',
    categoryDistribution: 'Berita mengikut Kategori',
    engagementMetrics: 'Metrik Penglibatan',
    topNews: 'Berita Teratas',
    topSources: 'Sumber Teratas',
    articlesCount: 'artikel',
    filterBySource: 'Tapis mengikut sumber',
    filterByCategory: 'Tapis mengikut kategori',
    all: 'Semua',
    author: 'Penulis',
    content: 'Kandungan',
    date: 'Tarikh',
    // Errors
    errors: 'Ralat',
    totalErrors: 'Jumlah Ralat',
    unresolvedErrors: 'Belum Selesai',
    todayErrors: 'Hari Ini',
    errorLevel: 'Tahap',
    errorType: 'Jenis',
    errorMessage: 'Mesej',
    errorEndpoint: 'Titik Akhir',
    errorTime: 'Masa',
    resolve: 'Selesaikan',
    unresolve: 'Batal Selesai',
    clearResolved: 'Kosongkan Selesai',
    deleteOld: 'Padam Lama',
    enableNotifications: 'Dayakan Pemberitahuan',
    noErrors: 'Tiada ralat dijumpai',
    // RSS Refresh
    refreshRssFeeds: 'Muat Semula Suapan RSS',
    refreshRssDescription: 'Muat turun artikel baharu dari semua sumber RSS secara manual',
    refreshNow: 'Muat Semula Sekarang',
    addedArticles: 'Ditambah',
    newArticles: 'artikel baharu',
    noNewArticles: 'Tiada artikel baharu dijumpai',
    totalProcessed: 'Jumlah diproses',
    feedErrors: 'Ralat suapan',
    // Translation
    retryTranslation: 'Cuba Semula Terjemahan',
    retryTranslationDescription: 'Terjemah tajuk artikel yang belum diterjemah ke bahasa Cina dan Melayu',
    translateNow: 'Terjemah Sekarang',
    translating: 'Menterjemah...',
    translated: 'Diterjemah',
    articlesTranslated: 'artikel',
    noArticlesToTranslate: 'Tiada artikel untuk diterjemah',
    pending: 'menunggu',
    // Comment History
    myComments: 'Komen Saya',
    totalCommentsMade: 'komen dibuat',
    noCommentsYet: 'Anda belum membuat sebarang komen',
    viewDiscussion: 'Lihat perbincangan',
    likes: 'suka',
    // Comment Moderation
    flagged: 'Ditandai',
    hidden: 'Disembunyikan',
    visible: 'Kelihatan',
    flag: 'Tanda',
    unflag: 'Nyahtanda',
    hide: 'Sembunyi',
    show: 'Tunjuk',
    reason: 'Sebab',
    filterByStatus: 'Tapis mengikut status',
    // Profile
    profile: 'Profil',
    editProfile: 'Edit Profil',
    memberSince: 'Ahli Sejak',
    changePassword: 'Tukar Kata Laluan',
    currentPassword: 'Kata Laluan Semasa',
    newPassword: 'Kata Laluan Baharu',
    confirmPassword: 'Sahkan Kata Laluan',
    leaveBlankPassword: 'Biarkan kosong untuk mengekalkan kata laluan semasa',
    passwordMismatch: 'Kata laluan tidak sepadan',
    currentPasswordRequired: 'Kata laluan semasa diperlukan',
    profileUpdated: 'Profil berjaya dikemaskini',
    updateFailed: 'Gagal mengemaskini profil',
    save: 'Simpan',
    // RSS Feed Management
    rssFeeds: 'Suapan RSS',
    manageFeeds: 'Urus Suapan RSS',
    addFeed: 'Tambah Suapan',
    addNewFeed: 'Tambah Suapan Baharu',
    feedName: 'Nama Suapan',
    feedUrl: 'URL Suapan',
    sarawakSource: 'Sumber khusus Sarawak (semua artikel diterima)',
    sarawak: 'Sarawak',
    filtered: 'Ditapis',
    lastFetched: 'Diambil Terakhir',
    never: 'Tidak Pernah',
    active: 'Aktif',
    inactive: 'Tidak Aktif',
    warning: 'Amaran',
    enable: 'Dayakan',
    disable: 'Lumpuhkan',
    noFeeds: 'Tiada suapan dikonfigurasi',
    recentErrors: 'Ralat Terkini',
    status: 'Status',
    type: 'Jenis'
  }
};

export function getTimeAgo(dateString: string, lang: Language): string {
  const date = new Date(dateString);
  const now = new Date();
  const diffMs = now.getTime() - date.getTime();
  const diffMins = Math.floor(diffMs / (1000 * 60));
  const diffHours = Math.floor(diffMs / (1000 * 60 * 60));
  const diffDays = Math.floor(diffMs / (1000 * 60 * 60 * 24));

  const t = translations[lang];

  if (diffMins < 1) return t.justNow;
  if (diffMins < 60) return `${diffMins} ${t.minutesAgo}`;
  if (diffHours < 24) return `${diffHours} ${t.hoursAgo}`;
  return `${diffDays} ${t.daysAgo}`;
}

export function getDomain(url: string): string {
  try {
    const domain = new URL(url).hostname;
    return domain.replace('www.', '');
  } catch {
    return url;
  }
}
